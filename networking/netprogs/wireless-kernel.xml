<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="wireless-kernel" xreflabel="Configure the Linux Kernel for Wireless">
  <?dbhtml filename="wireless-kernel.html"?>


  <title>Configure the Linux Kernel for Wireless</title>

  <para>
    Before using any userspace tool for connecting with a wireless AP,
    the Linux kernel must be configured to drive the wireless NIC properly.
    Enable the following options in the kernel configuration as well as
    specific device drivers for your hardware and recompile the kernel if
    necessary:
  </para>

<screen><literal>[*] Networking support  ---&gt;                                [CONFIG_NET]
  [*] Wireless  ---&gt;                                        [CONFIG_WIRELESS]
    &lt;*/M&gt; cfg80211 - wireless configuration API             [CONFIG_CFG80211]
    &lt; /*/M&gt; Generic IEEE 802.11 Networking Stack (mac80211) [CONFIG_MAC80211]
Device Drivers  ---&gt;
  [*] Network device support  ---&gt;                          [CONFIG_NETDEVICES]
    [*] Wireless LAN  ---&gt;                                  [CONFIG_WLAN]</literal></screen>

  <para>
    Open the <quote>Wireless LAN</quote> submenu and select the options that
    support your hardware. <command>lspci</command> from
    <xref linkend="pciutils"/> or <command>lsusb</command> from
    <xref linkend="usbutils"/> can be used to
    view your hardware configuration.  Note that many (though not all)
    options for the wireless NICs depend on
    <parameter>CONFIG_MAC80211</parameter>. After the correct drivers are
    loaded, the interface will appear in
    <filename>/sys/class/net</filename>, or the output of the
    <command>ip link</command> command.
  </para>

  <para>
    Many wireless NIC drivers require a firmware.  If you've enabled the
    correct driver in the kernel configuration but it fails to load (with
    the messages like <quote><computeroutput>Direct firmware load for
    <replaceable>&lt;filename</replaceable>&gt; failed with error
    -2</computeroutput></quote>, it means you need to install the firmware
    or the wireless NIC won't work.  Read <xref linkend='postlfs-firmware'/>
    for details.
  </para>

</sect1>
